.\" Automatically generated by Pandoc 2.14.0.3
.\"
.TH "BASE" "1" "" "Base 2.0.1 (2022-02-28)" "Base Manual"
.nh
.SH NAME
.PP
Base - configure Bash shell environments relative to a directory
.SH SYNOPSIS
.TP
\f[B]\f[CB]base\f[B]\f[R] [\f[I]label\f[R]]
run in a new Bash shell
.TP
\f[B]\f[CB]. base\f[B]\f[R] [\f[I]label\f[R]]
copy env and run in a new Bash shell
.TP
\f[B]\f[CB]. base_activate\f[B]\f[R] [\f[I]label\f[R]]
run in the current Bash shell
.SH DESCRIPTION
.PP
Base configures Bash shell environments relative to a directory.
It provides an easy and consistent way to load the configuration for
diverse projects.
.SH OPTIONS
.TP
--help
show usage information and exit
.TP
--version
show version information and exit
.SH ARGUMENTS
.TP
\f[I]label\f[R]
Base environment label to use in the prompt and title
.SH Usage
.PP
Change to the directory that you would like to use as the \[lq]Base
directory\[rq] and run Base in one of the three following ways:
.TP
\f[B]\f[CB]base\f[B]\f[R] [\f[I]label\f[R]]
When you run \f[C]base\f[R] normally, the Base environment is configured
in a new Bash shell.
Only environment variables that are exported in the parent shell are
propagated.
\f[C]${HOME}/.bashrc\f[R] is sourced if it exists.
.TP
\f[B]\f[CB]. base\f[B]\f[R] [\f[I]label\f[R]]
When you source \f[C]base\f[R], the Base environment is configured in a
new Bash shell, but all environment variables and aliases from the
parent shell are propagated.
.TP
\f[B]\f[CB]. base_activate\f[B]\f[R] [\f[I]label\f[R]]
When you source \f[C]base_activate\f[R], the Base environment is
configured in the current Bash shell.
Note that this method cannot be used to create a nested Base
environment.
.PP
The Base label, displayed in the prompt and title, may be configured in
the following ways:
.IP \[bu] 2
It can be set in a configuration script.
(See CONFIGURATION below.)
.IP \[bu] 2
It can be set via the CLI using the \f[I]label\f[R] argument.
.IP \[bu] 2
The default value is the Base directory name.
.PP
When a Base environment is configured, the following two commands are
available:
.TP
\f[B]\f[CB]bcd\f[B]\f[R] [\f[I]directory\f[R]]
This command changes to a directory relative to the Base directory.
When no arguments are provided, it changes to the Base directory.
Use tab completion for quick navigation.
.TP
\f[B]\f[CB]base_deactivate\f[B]\f[R]
This command deactivates the Base environment.
When using a Base environment configured using \f[C]base_activate\f[R],
it restores the previous configuration.
When using a Base environment configured in a new shell using
\f[C]base\f[R], it exits the new shell.
(In this case, \f[C]exit\f[R] may also be used.)
.SH PROMPT
.PP
The Base prompt indicates your location in relation to the Base
directory.
When under the Base directory, the label is displayed in brackets.
When outside the Base directory, the label is displayed in parentheses.
.PP
The following example prompts are for a Base environment configured with
a Base directory of \f[C]/home/user/proj\f[R]:
.TP
\f[B]\f[CB][proj] $\f[B]\f[R]
In the Base directory (\f[C]/home/user/proj\f[R])
.TP
\f[B]\f[CB][proj] src$\f[B]\f[R]
In the \f[C]src\f[R] directory under the Base directory
(\f[C]/home/user/proj/src\f[R])
.TP
\f[B]\f[CB](proj) \[ti]$\f[B]\f[R]
In the \f[C]${HOME}\f[R] directory, outside the Base directory
(\f[C]/home/user\f[R])
.TP
\f[B]\f[CB](proj) \[ti]/tmp$\f[B]\f[R]
In the \f[C]${HOME}/tmp\f[R] directory, outside the Base directory
(\f[C]/home/user/tmp\f[R])
.TP
\f[B]\f[CB](proj) /etc\f[B]\f[R]
In the \f[C]/etc\f[R] directory, outside the Base directory
.TP
\f[B]\f[CB][proj] #\f[B]\f[R]
A \f[C]#\f[R] prompt is used when \f[C]root\f[R]
.SH TITLE
.PP
The terminal title is updated with your location in relation to the Base
directory, using the same syntax as the prompt.
.PP
To disable this feature, set the \f[C]BASE_NO_TITLE\f[R] environment
variable.
.SH CONFIGURATION
.PP
A Base environment is configured using one or more Bash scripts stored
in \f[C].base\f[R] in the Base directory.
\f[C].base\f[R] can be a file, a link to a shared script, or a directory
containing any number of files, links, and directories.
The file(s)/link(s) are sourced (in sorted order) during Base
environment configuration.
Configuration should support deactivation by using the functions below.
.PP
Scripts that are included with Base can be found in
\f[C]/usr/share/base\f[R].
.PP
The following environment variables are available:
.TP
\f[B]\f[CB]BASE_VERSION\f[B]\f[R]
This variable is set to the Base version.
.TP
\f[B]\f[CB]BASE_MODE\f[B]\f[R]
This variable indicates the way that the Base environment is being
configured:
.RS
.IP \[bu] 2
\f[C]NEWENV\f[R]: new shell (\f[C]base\f[R])
.IP \[bu] 2
\f[C]CPYENV\f[R]: new shell with copied environment (\f[C]. base\f[R])
.IP \[bu] 2
\f[C]CURENV\f[R]: current shell (\f[C]. base_activate\f[R])
.RE
.TP
\f[B]\f[CB]BASE\f[B]\f[R]
This variable is set to the Base directory.
.TP
\f[B]\f[CB]BASE_LABEL\f[B]\f[R]
This variable is set to the Base label.
.PP
The following functions are available:
.TP
\f[B]\f[CB]_base_lib_array_contains\f[B]\f[R] \f[I]array_name\f[R] \f[I]value\f[R]
This function checks if a global array contains a specific value.
It returns \f[C]0\f[R] if the value is found in the array or \f[C]1\f[R]
otherwise.
.TP
\f[B]\f[CB]_base_lib_array_append\f[B]\f[R] \f[I]array_name\f[R] \f[I]value\f[R]
This function appends a value to a global array.
.TP
\f[B]\f[CB]_base_lib_set_insert\f[B]\f[R] \f[I]array_name\f[R] \f[I]value\f[R]
This function appends a value to a global array if the value is not
already in the array.
.TP
\f[B]\f[CB]_base_var_save\f[B]\f[R] \f[I]variable_name\f[R]
When configuring a Base environment in the current shell, this function
stores the current value of an environment variable so that it will be
restored when the Base environment is deactivated.
.TP
\f[B]\f[CB]_base_var_set\f[B]\f[R] \f[I]variable_name\f[R] \f[I]value\f[R]
This function sets an environment variable.
When configuring a Base environment in the current shell, it stores the
previous value so that it will be restored when the Base environment is
deactivated.
.TP
\f[B]\f[CB]_base_var_unset\f[B]\f[R] \f[I]variable_name\f[R]
This function unsets an environment variable.
When configuring a Base environment in the current shell, it stores the
previous value so that it will be restored when the Base environment is
deactivated.
.TP
\f[B]\f[CB]_base_label_set\f[B]\f[R] \f[I]label\f[R]
This function sets the Base label, taking precedence over CLI arguments.
.TP
\f[B]\f[CB]_base_label_set_default\f[B]\f[R] \f[I]label\f[R]
This function sets the Base label if one was not specified via a CLI
argument.
.TP
\f[B]\f[CB]_base_deactivation_callback_register\f[B]\f[R] \f[I]function_name\f[R]
This registers a function to be evaluated during deactivation.
When using a new Bash shell, deactivation is not necessary, so the
referenced function is unset.
.TP
\f[B]\f[CB]_base_select\f[B]\f[R] \f[I]label\f[R] \f[I]option\f[R] \f[B]\f[CB]...\f[B]\f[R]
This function prompts the user to select an option.
An indexed list of options is displayed, and the user selects an option
by index.
An invalid selection results in the default: the first option.
The selected option value (not the index) is stored in the
\f[C]BASE_SELECTION\f[R] environment variable.
.RS
.PP
If only one option is passed, it is selected without prompting the user.
If no options are passed, a warning is displayed and
\f[C]BASE_SELECTION\f[R] is unset.
This function returns \f[C]0\f[R] when \f[C]BASE_SELECTION\f[R] is set
or \f[C]1\f[R] otherwise.
.RE
.TP
\f[B]\f[CB]_base_select_dir\f[B]\f[R] \f[I]label\f[R] \f[I]parent_directory\f[R] \f[I]glob\f[R]
This function prompts the user to select a directory that matches the
specified glob (example: \f[C]virtualenv-*\f[R]).
.PP
Note that Base configures \f[C]PROMPT_COMMAND\f[R] to use the
\f[C]_base_ps_update\f[R] function to update the prompt.
To configure another command to run at every prompt, prefix it to
\f[C]PROMPT_COMMAND\f[R] as follows:
.IP
.nf
\f[C]
PROMPT_COMMAND=\[dq]foo;${PROMPT_COMMAND}\[dq]
\f[R]
.fi
.SH PROJECT
.TP
GitHub:
<https://github.com/ExtremaIS/base>
.TP
Reporting issues:
GitHub: <https://github.com/ExtremaIS/base/issues>
.RS
.PP
Email: <bugs@extrema.is>
.RE
.TP
Copyright:
Copyright (c) 2011-2022 Travis Cardwell
.TP
License:
The MIT License <https://opensource.org/licenses/MIT>
